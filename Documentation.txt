This grocery‑price tracker is a solid project idea and easier to finish than the UAV tool, while still letting you use all the libs you want.

## Feasibility as course project

- It fits the course: stand‑alone Python app, clear GUI, data I/O (receipts in, predictions and charts out), and an ML component to suggest buy date/price.
- Scope is controllable: you can restrict to a few items (coffee, milk, noodles) and 1–2 months of data, and still show meaningful time‑series trends and recommendations.

## How to use all the libraries

- **Pandas / NumPy / SQL / Spark**:  
  - Parse uploaded receipt CSVs (or manually entered records) into a DataFrame with columns: `item_name, date, price, supermarket, location`.  
  - Store the cleaned data in SQLite; optional Spark job to aggregate by week or weekday pattern (e.g. average price per weekday).  
  - Use NumPy for feature engineering: rolling averages, price volatility, min/median/max per weekday.

- **PyTorch (ML model)**:  
  - Build a tiny model (or even simple linear baseline first) that learns a mapping from features like `weekday, days_to_salary, store_id, month` to expected price or discount probability.  
  - Given today’s date and item, the model predicts expected price for each upcoming day in the next week; you choose the day with lowest predicted price as the “suggested buying day” and show predicted price.

- **OpenCV or Pillow**:  
  - For receipt upload, allow image receipts: use OpenCV/Pillow for basic preprocessing (grayscale, thresholding, crop) and either a simple OCR pipeline or manual “assist” (first version can just accept CSV, but showing you can load and display the receipt image already demonstrates the library).  
  - Also generate the chart image: if you don’t use matplotlib directly, you can draw a simple bar chart using Pillow/OpenCV and then display it in the right‑bottom pane.

## UI layout

The application's UI is structured as a single vertical layout, with the following panels stacked on top of each other:

- **Masthead**: Displays the application title and other meta information in a newspaper-style header.

- **Search Panel**: Allows users to search for products by name and brand. It includes a search button to trigger the search.

- **Recommendation Panel**: Shows the ML model's recommendation for the best day to buy the selected product, along with the predicted price and a confidence score.

- **Table Panel**: Displays the historical price data for the selected product in a sortable table.

- **Historical Chart**: A line chart that visualizes the price history of the selected product over time.

- **Geographic Distribution Map**: A map that shows the locations of the supermarkets where the product has been purchased.

## ML Model Reproducibility

The machine learning model was initially producing different results on each run, even with the same input. This was because the model, a PyTorch neural network, was being re-initialized with random weights every time a prediction was requested.

To ensure that the model produces consistent and deterministic results, a fixed random seed has been set for both `numpy` and `torch` at the beginning of the prediction process. This guarantees that the model's "random" weight initialization is the same every time, making the entire training and prediction process reproducible. This is a standard practice in machine learning to ensure the stability and comparability of results.

## How the Machine Learning Model Works

The machine learning model in this project is designed to predict the best day to buy a product at the lowest price. It does this by analyzing historical price data and forecasting prices for the next seven days. Here’s a step-by-step breakdown of how it works:

### 1. Model Architecture

The model is a simple **feedforward neural network** built using **PyTorch**. It consists of three fully connected (linear) layers with ReLU activation functions in between. The network takes a set of numerical features as input and outputs a single value, which is the predicted price.

### 2. Feature Engineering

Before the data is fed into the model, it goes through a feature engineering process to create meaningful inputs for the model. This process involves:

*   **Date-based Features**: The `date` of each purchase is used to extract the `day_of_week`, `day_of_year`, and `month`. These features help the model learn patterns related to time, such as weekly or seasonal price fluctuations.
*   **Rolling Statistics**: A **rolling average** and **price volatility** (standard deviation) are calculated over a 7-day window. These features provide the model with information about the recent price trend and stability.
*   **Categorical Features**: Text-based features like `brand_name`, `supermarket`, and `location` are converted into numerical format using **one-hot encoding**. This creates a binary column for each category, allowing the model to learn from these attributes.
*   **Weight**: The `weight_grams` of the product is also used as a feature.

### 3. Training Process

Every time you search for a product, the model is trained from scratch on the historical data for that specific product. The training process is as follows:

*   **Data Preparation**: The historical data is converted into PyTorch tensors, which are the fundamental data structures used by the model.
*   **Model Initialization**: A new instance of the `PricePredictor` model is created.
*   **Loss Function**: The model uses the **Mean Squared Error (MSE)** loss function (`nn.MSELoss`), which measures the average squared difference between the predicted prices and the actual prices.
*   **Optimizer**: The **Adam optimizer** (`optim.Adam`) is used to update the model's weights during training to minimize the loss.
*   **Training Loop**: The model is trained for 100 epochs. In each epoch, it makes predictions on the training data, calculates the loss, and adjusts its weights to improve its accuracy.

### 4. Prediction Process

After the model is trained, it is used to predict prices for the next seven days:

*   **Future Features**: A new set of features is created for the next seven days. These features are based on the most recent data point in the historical data.
*   **Prediction**: The trained model predicts the price for each of the next seven days.

### 5. Output

The model's output is a set of price predictions for the next week. The day with the **lowest predicted price** is chosen as the "best day to buy". The final recommendation presented to the user includes:

*   The best day to buy.
*   The predicted price for that day.
*   A confidence score, which is a simple heuristic based on the historical price volatility.

### 6. Reproducibility

To ensure that the model produces the same results every time for the same product, **random seeds** for `numpy` and `torch` are set at the beginning of the process. This makes the model's behavior deterministic and its predictions consistent.
